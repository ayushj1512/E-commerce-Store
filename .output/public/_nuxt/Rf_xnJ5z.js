import{_ as d,c as o,o as r,a as e,F as h,E as u,t as a,O as g}from"#entry";import{u as p}from"./Xk0yAe1G.js";const x={name:"Vouchers",data(){return{vouchers:[],loading:!0}},methods:{async fetchVouchers(){this.loading=!0;const n=p();try{if(!n.isAuthenticated){console.warn("⚠️ User not logged in"),this.vouchers=[];return}const t=JSON.stringify({gateway_action:"cart/availableVoucher",site:"streetstylestore",all:0,user_hash_key:n.key}),c=await g.post("https://gateway.streetstylestore.com/gateway/v1/",t,{headers:{"Content-Type":"application/json"},withCredentials:!0});console.log("🔹 Full API Response:",c.data),c.data?.voucherList?.length>0?(this.vouchers=c.data.voucherList,console.log("🔹 Voucher List:",this.vouchers)):(this.vouchers=[],console.log("🔹 No vouchers found."))}catch(t){console.error("❌ Failed to fetch vouchers:",t),this.vouchers=[]}finally{this.loading=!1}}},mounted(){this.fetchVouchers()}},y={class:"min-h-screen bg-white px-4 py-6"},f={class:"flex items-center justify-between mb-6"},_={key:0,class:"text-center py-10 text-gray-600"},m={key:1,class:"text-center py-10"},v={key:2,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},b={class:"flex items-center justify-between mb-3"},w={class:"text-lg font-semibold text-black"},k={class:"text-xs px-2 py-1 rounded-full bg-black text-white"},V={class:"text-gray-700 text-sm mb-1"},S={class:"text-gray-500 text-xs mb-2"},F={class:"text-gray-600 text-xs"};function L(n,t,c,A,i,l){return r(),o("div",y,[e("div",f,[t[1]||(t[1]=e("h1",{class:"text-2xl font-bold text-black"},"Your Vouchers",-1)),e("button",{onClick:t[0]||(t[0]=(...s)=>l.fetchVouchers&&l.fetchVouchers(...s)),class:"px-4 py-2 bg-black text-white rounded-md hover:bg-gray-800 transition"}," Refresh ")]),i.loading?(r(),o("div",_," Loading vouchers... ")):i.vouchers.length===0?(r(),o("div",m,[...t[2]||(t[2]=[e("p",{class:"text-gray-700 text-base font-medium"}," You don’t have any vouchers yet 🪄 ",-1),e("p",{class:"text-gray-500 text-sm"}," Shop a little and we’ll surprise you with offers! ",-1)])])):(r(),o("div",v,[(r(!0),o(h,null,u(i.vouchers,s=>(r(),o("div",{key:s.code,class:"border border-gray-300 rounded-xl p-5 shadow-sm hover:shadow-md transition bg-white"},[e("div",b,[e("h2",w,a(s.code),1),e("span",k,a(s.reduction||"Flat Off"),1)]),e("p",V,a(s.name||"Special Voucher"),1),e("p",S," Expires: "+a(s.date_to||"N/A"),1),e("p",F,a(s.description||"Use this voucher to save on your next order!"),1)]))),128))]))])}const B=d(x,[["render",L],["__scopeId","data-v-037c75f4"]]);export{B as default};
