import{ai as m,r as k,G as z,g as v,B as T,c as n,C as S,o as r,a as e,F as M,E as V,J as _,t as o,d as D,_ as U,Q as L,p as R,z as c,b as u,U as C,aj as A}from"#entry";import{u as q}from"./Dzr-gnKJ.js";import{u as I}from"./Xk0yAe1G.js";/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=m("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=m("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=m("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=m("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=m("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=m("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=m("repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=m("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-vue-next v0.542.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=m("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),K={key:0,class:"bg-gray-50 py-6"},W={class:"max-w-7xl mx-auto space-y-8"},X={class:"bg-white p-6 rounded-2xl shadow-md"},Z={key:0,class:"space-y-3"},ee={key:1,class:"text-center py-6"},se={key:2,class:"space-y-3"},te=["onClick"],oe={key:0,class:"absolute top-2 right-2 text-xs bg-black text-white px-2 py-1 rounded-full"},ae={class:"font-semibold"},le={class:"text-sm text-gray-600"},de={key:0},ne={class:"text-sm text-gray-600"},re={class:"text-sm text-gray-500"},ie={__name:"CheckoutAddressSelector",setup(B){const y=k(!1),p=k(!0),b=k(null),j=z(),a=q(),x=I(),f=v(()=>a.addresses.map(t=>({id_address:t.id_address,fullname:t.fullname||`${t.firstname??""} ${t.lastname??""}`,address1:t.address1||"",address2:t.address2||"",city:t.city||"",name:t.name||"",postcode:t.postcode||"",phone_mobile:t.phone_mobile||""})));function w(){j.push("/profile/add-address")}function h(t){b.value=t}return T(async()=>{if(y.value=!0,p.value=!0,x.initAuth(),x.isAuthenticated&&x.key&&(await a.fetchAddresses(),a.addresses.length>0)){const t=a.addresses[0];b.value={id_address:t.id_address,fullname:t.fullname||`${t.firstname??""} ${t.lastname??""}`,address1:t.address1||"",address2:t.address2||"",city:t.city||"",name:t.name||"",postcode:t.postcode||"",phone_mobile:t.phone_mobile||""}}p.value=!1}),(t,g)=>y.value?(r(),n("div",K,[e("div",W,[e("section",X,[g[1]||(g[1]=e("h2",{class:"text-xl font-bold mb-4"},"Delivery Address",-1)),p.value?(r(),n("div",Z,[(r(),n(M,null,V(2,d=>e("div",{key:d,class:"h-20 bg-gray-100 rounded-lg animate-pulse"})),64))])):f.value.length?(r(),n("div",se,[(r(!0),n(M,null,V(f.value,d=>(r(),n("div",{key:d.id_address,onClick:i=>h(d),class:_(["relative border p-4 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-md",b.value?.id_address===d.id_address?"border-black shadow-lg ring-1 ring-black/10":"border-gray-200"])},[b.value?.id_address===d.id_address?(r(),n("span",oe," Selected ")):S("",!0),e("div",null,[e("p",ae,o(d.fullname),1),e("p",le,[D(o(d.address1)+" ",1),d.address2?(r(),n("span",de,", "+o(d.address2),1)):S("",!0)]),e("p",ne,o(d.city)+", "+o(d.name)+" - "+o(d.postcode),1),e("p",re,"ðŸ“ž "+o(d.phone_mobile),1)])],10,te))),128)),e("div",{class:"flex justify-center"},[e("button",{onClick:w,class:"bg-black text-white px-4 py-2 rounded-full"}," Add New Address ")])])):(r(),n("div",ee,[g[0]||(g[0]=e("p",{class:"text-gray-600 mb-3"},"No addresses found.",-1)),e("button",{onClick:w,class:"bg-black text-white px-4 py-2 rounded-full"}," Add Address ")]))])])])):S("",!0)}},ce={key:0,class:"bg-gray-50 min-h-screen py-6 px-3 sm:px-6 md:px-12 lg:px-24"},ue={class:"max-w-7xl mx-auto space-y-8"},pe={class:"bg-white p-6 rounded-2xl shadow-md"},me={key:0,class:"text-center py-6"},ye={key:1,class:"space-y-4"},xe={class:"flex items-center gap-3"},he=["src"],ve={class:"font-medium text-gray-800"},be={key:0,class:"text-gray-500 text-sm"},fe={class:"text-gray-900 font-semibold"},ge={class:"font-semibold text-gray-900"},_e={class:"mt-4 flex justify-between items-center text-gray-700"},ke={class:"text-sm"},we={class:"font-semibold"},Ce={class:"text-sm"},Ae={class:"font-semibold"},Se={class:"text-right"},je={class:"text-lg font-bold mt-1"},$e={class:"bg-white p-6 rounded-2xl shadow-md"},Pe={class:"grid grid-cols-1 gap-4"},Me={class:"flex items-center gap-3"},Ve={class:"flex items-center gap-3"},De={class:"text-xs text-gray-500"},Ne={class:"flex items-center gap-3"},ze={class:"flex items-center gap-3"},Te={class:"flex items-center gap-3"},qe={class:"bg-white p-6 rounded-2xl shadow-md"},Be={class:"space-y-3 text-gray-700"},Ue={class:"flex justify-between font-medium"},Le={class:"flex justify-between font-medium"},Re={class:"flex justify-between font-bold text-lg border-t pt-2"},Ie={class:"pt-4 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3"},Oe={class:"flex items-center gap-4"},Ee={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-2"},Ge={class:"flex items-center gap-2"},He={class:"flex items-center gap-3"},$=40,P=0,Ye={__name:"index",setup(B){const y=L(),p=q(),b=z(),j=k(!1);k(!1);const a=k("cod");T(async()=>{j.value=!0,console.log("[Checkout] mounted, cart items:",y.items.length),console.log("[Checkout] addressStore before init:",p.addresses?.length??"no-store");try{await p.init(),console.log("[Checkout] addressStore after init, addresses:",p.addresses)}catch(i){console.error("[Checkout] addressStore.init() failed:",i)}});const x=v(()=>{const i=p.deliveryAddress??p.getDeliveryAddress??{};return console.log("[Checkout] computed selectedAddress:",i&&Object.keys(i).length?i.id_address??"has-id":"none"),i}),f=v(()=>y.items.reduce((i,s)=>i+(s.price||0)*(s.quantity||0),0)),w=v(()=>y.items.reduce((i,s)=>i+(s.quantity||0),0)),h=v(()=>f.value+$-P),t=v(()=>Math.round(h.value/3)),g=v(()=>t.value);function d(){if(console.log("[Checkout] proceedToPayment called. Selected address:",x.value),!x.value||Object.keys(x.value).length===0||!x.value.id_address){alert("Please select a delivery address before proceeding.");return}console.log("[Checkout] selectedPayment:",a.value,"total:",h.value),b.push("/checkout/payment")}return R(a,i=>console.log("[Checkout] payment changed to:",i)),(i,s)=>j.value?(r(),n("div",ce,[e("div",ue,[e("section",pe,[s[8]||(s[8]=e("h2",{class:"text-xl font-bold mb-4"},"Your Cart",-1)),c(y).items.length===0?(r(),n("div",me,[...s[5]||(s[5]=[e("p",{class:"text-gray-600 text-sm sm:text-base"},"Your cart is empty.",-1)])])):(r(),n("div",ye,[(r(!0),n(M,null,V(c(y).items,l=>(r(),n("div",{key:l.id+(l.size||""),class:"flex justify-between items-center border-b pb-3"},[e("div",xe,[e("img",{src:l.image,alt:"Product",class:"w-16 h-20 object-cover rounded-xl"},null,8,he),e("div",null,[e("p",ve,o(l.name),1),l.size?(r(),n("p",be,"Size: "+o(l.size),1)):S("",!0),e("p",fe,"â‚¹"+o(l.price)+" x "+o(l.quantity),1)])]),e("p",ge,"â‚¹"+o(l.price*l.quantity),1)]))),128)),e("div",_e,[e("div",null,[e("div",ke,[s[6]||(s[6]=D("Total items: ",-1)),e("span",we,o(w.value),1)]),e("div",Ce,[s[7]||(s[7]=D("Subtotal: ",-1)),e("span",Ae,"â‚¹"+o(f.value),1)])]),e("div",Se,[e("div",{class:"text-sm"},"Delivery: â‚¹"+o($)),e("div",{class:"text-sm"},"Discount: -â‚¹"+o(P)),e("div",je,"Total: â‚¹"+o(h.value),1)])])]))]),e("div",null,[u(ie)]),e("section",$e,[s[14]||(s[14]=e("h2",{class:"text-xl font-bold mb-4"},"Payment Options",-1)),e("div",Pe,[e("label",{class:_(["flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition",a.value==="cod"?"border-black shadow-md":"border-gray-300"])},[e("div",Me,[C(e("input",{type:"radio",value:"cod","onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l),class:"accent-black"},null,512),[[A,a.value]]),s[9]||(s[9]=e("div",null,[e("p",{class:"font-medium"},"Cash on Delivery"),e("p",{class:"text-xs text-gray-500"},"Not available on this order. â‚¹99 COD charge if applicable.")],-1))]),u(c(F),{class:"w-5 h-5 text-gray-500"})],2),e("label",{class:_(["flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition",a.value==="bnpl"?"border-black shadow-md":"border-gray-300"])},[e("div",Ve,[C(e("input",{type:"radio",value:"bnpl","onUpdate:modelValue":s[1]||(s[1]=l=>a.value=l),class:"accent-black"},null,512),[[A,a.value]]),e("div",null,[s[10]||(s[10]=e("p",{class:"font-medium"},"Buy Now Pay Later",-1)),e("p",De,"Pay â‚¹"+o(t.value)+" now + 2 monthly payments of â‚¹"+o(g.value)+" later",1)])]),u(c(G),{class:"w-5 h-5 text-gray-500"})],2),e("label",{class:_(["flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition",a.value==="upi"?"border-black shadow-md":"border-gray-300"])},[e("div",Ne,[C(e("input",{type:"radio",value:"upi","onUpdate:modelValue":s[2]||(s[2]=l=>a.value=l),class:"accent-black"},null,512),[[A,a.value]]),s[11]||(s[11]=e("span",{class:"font-medium"},"UPI (GooglePay / PhonePe / PayTM)",-1))]),u(c(Q),{class:"w-5 h-5 text-gray-500"})],2),e("label",{class:_(["flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition",a.value==="card"?"border-black shadow-md":"border-gray-300"])},[e("div",ze,[C(e("input",{type:"radio",value:"card","onUpdate:modelValue":s[3]||(s[3]=l=>a.value=l),class:"accent-black"},null,512),[[A,a.value]]),s[12]||(s[12]=e("span",{class:"font-medium"},"Credit / Debit Card (Visa / Master / Amex)",-1))]),u(c(N),{class:"w-5 h-5 text-gray-500"})],2),e("label",{class:_(["flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition",a.value==="netbanking"?"border-black shadow-md":"border-gray-300"])},[e("div",Te,[C(e("input",{type:"radio",value:"netbanking","onUpdate:modelValue":s[4]||(s[4]=l=>a.value=l),class:"accent-black"},null,512),[[A,a.value]]),s[13]||(s[13]=e("span",{class:"font-medium"},"Net Banking",-1))]),u(c(E),{class:"w-5 h-5 text-gray-500"})],2)])]),e("section",qe,[s[23]||(s[23]=e("h2",{class:"text-xl font-bold mb-4"},"Order Summary",-1)),e("div",Be,[e("div",Ue,[s[15]||(s[15]=e("span",null,"Total Items",-1)),e("span",null,o(w.value),1)]),e("div",Le,[s[16]||(s[16]=e("span",null,"Subtotal",-1)),e("span",null,"â‚¹"+o(f.value),1)]),e("div",{class:"flex justify-between font-medium"},[s[17]||(s[17]=e("span",null,"Delivery",-1)),e("span",null,"â‚¹"+o($))]),e("div",{class:"flex justify-between font-medium"},[s[18]||(s[18]=e("span",null,"Discount",-1)),e("span",null,"-â‚¹"+o(P))]),e("div",Re,[s[19]||(s[19]=e("span",null,"Total Payment",-1)),e("span",null,"â‚¹"+o(h.value),1)]),e("div",Ie,[e("div",Oe,[e("div",Ee,[u(c(J),{class:"w-5 h-5 text-green-600"}),s[20]||(s[20]=e("span",{class:"text-sm font-medium"},"Secure Payment",-1))]),e("div",Fe,[u(c(Y),{class:"w-5 h-5 text-green-600"}),s[21]||(s[21]=e("span",{class:"text-sm font-medium"},"Easy Exchange",-1))]),e("div",Ge,[u(c(H),{class:"w-5 h-5 text-green-600"}),s[22]||(s[22]=e("span",{class:"text-sm font-medium"},"Fast Refunds",-1))])]),e("div",He,[e("button",{onClick:d,class:"bg-black text-white px-6 py-3 rounded-full font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2"},[u(c(N),{class:"w-5 h-5"}),e("span",null,"Proceed to Payment â€¢ â‚¹"+o(h.value),1),u(c(O),{class:"w-5 h-5"})])])])])])])])):S("",!0)}},We=U(Ye,[["__scopeId","data-v-444430ed"]]);export{We as default};
