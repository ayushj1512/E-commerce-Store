import{K as a,O as r}from"#entry";import{u as i}from"./Xk0yAe1G.js";const d={currencySymbol:"â‚¹",siteLogo:"https://images.streetstylestore.com/new-sssnew-images/sss-logo.jpg",cookieAge:3600*24*180,apiUrl:"https://api.streetstylestore.com/",apiKey:{product:"Bm23NaocNyDb2qWiT9Mpn4qXdSmq7bqdoLzY6espTB3MC6Rx",config:"Bm23NaocNyDb2qWiT9Mpn4qXdSmq7bqdoLzY6espTB3MC6Rx",pinCode:"Bm23NaocNyDb2qWiT9Mpn4qXdSmq7bqdoLzY6espTB3MC6Rx",productReviews:"9phsLIHZD9o6iBVkETcf2D3BFWTRCqDX"},serviceUrl:"http://localhost:5000/",gatewayUrl:"https://gateway.streetstylestore.com/gateway/v1/",baseUrl:"https://streetstylestore.com/",site:"sss",version:"1"},n=a("address",{state:()=>({addresses:[],lastUsedAddress:{},deliveryAddress:{},saveAddressClick:!1,saveAddressButton:!1,editAddress:{},checkAddressValidation:!1}),getters:{getAddresses:s=>s.addresses,getLastUsedAddress:s=>s.lastUsedAddress,getAddressClick:s=>s.saveAddressClick,getSaveAddressButton:s=>s.saveAddressButton,getDeliveryAddress:s=>s.deliveryAddress,getEditAddress:s=>s.editAddress,getCheckAddressValidation:s=>s.checkAddressValidation},actions:{async init(){await this.fetchAddresses()},async fetchAddresses(){const s=i();if(!s.isAuthenticated||!s.key){console.warn("[Address Store] âš ï¸ User not authenticated, skipping fetchAddresses");return}const e=JSON.stringify({gateway_action:"customer/getCustomerAddresses",id_customer:s.id_customer,user_hash_key:s.key,site:d.site});console.log("[Address Store] ğŸ“¤ Fetch Addresses Request:",e);try{const{data:t}=await r.post(d.gatewayUrl,e,{headers:{"Content-Type":"application/json"}});console.log("[Address Store] ğŸ“© Fetch Addresses Response:",t),this.setAddresses(t)}catch(t){console.error("[Address Store] âŒ Error fetching addresses:",t)}},async saveAddress(s){const e=i();if(!e.isAuthenticated||!e.key)return;const t=JSON.stringify({gateway_action:"customer/saveCustomerAddress",id_customer:e.id_customer,user_hash_key:e.key,address:s,site:d.site});console.log("[Address Store] ğŸ“¤ Save Address Request:",t),await r.post(d.gatewayUrl,t,{headers:{"Content-Type":"application/json"}}),await this.fetchAddresses()},async removeAddress(s){const e=i();if(!e.isAuthenticated||!e.key)return;const t=JSON.stringify({gateway_action:"customer/removeCustomerAddress",id_customer:e.id_customer,user_hash_key:e.key,id_address:s,site:d.site,version:d.version});console.log("[Address Store] ğŸ“¤ Remove Address Request:",t),await r.post(d.gatewayUrl,t,{headers:{"Content-Type":"application/json"}}),await this.fetchAddresses(),this.deliveryAddress?.id_address===s&&(this.deliveryAddress={})},setSaveAddressClick(s){this.saveAddressClick=s},setSaveAddressButton(s){this.saveAddressButton=s},setLastUsedAddress(s){this.lastUsedAddress=s},setDeliveryAddress(s){this.deliveryAddress=s},setEditAddress(s){this.editAddress=s},setCheckAddressValidation(s){this.checkAddressValidation=s},setAddresses(s){if(!Array.isArray(s)||s.length===0){this.addresses=[],this.lastUsedAddress={},(!this.deliveryAddress||Object.keys(this.deliveryAddress).length===0)&&(this.deliveryAddress={});return}this.addresses=s;const[e,...t]=s;e?(this.lastUsedAddress=e,(!this.deliveryAddress||Object.keys(this.deliveryAddress).length===0)&&(this.deliveryAddress=e)):t.length===1&&(!this.deliveryAddress||Object.keys(this.deliveryAddress).length===0)&&(this.deliveryAddress=t[0])}}});export{n as u};
