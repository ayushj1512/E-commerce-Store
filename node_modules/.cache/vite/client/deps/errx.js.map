{
  "version": 3,
  "sources": ["../../../../errx/dist/index.js"],
  "sourcesContent": ["const IS_ABSOLUTE_RE = /^[/\\\\](?![/\\\\])|^[/\\\\]{2}(?!\\.)|^[a-z]:[/\\\\]/i;\r\nconst LINE_RE = /^\\s+at (?:(?<function>[^)]+) \\()?(?<source>[^)]+)\\)?$/u;\r\nconst SOURCE_RE = /^(?<source>.+):(?<line>\\d+):(?<column>\\d+)$/u;\r\nfunction captureRawStackTrace() {\r\n  if (!Error.captureStackTrace) {\r\n    return;\r\n  }\r\n  const stack = new Error();\r\n  Error.captureStackTrace(stack);\r\n  return stack.stack;\r\n}\r\nfunction captureStackTrace() {\r\n  const stack = captureRawStackTrace();\r\n  return stack ? parseRawStackTrace(stack) : [];\r\n}\r\nfunction parseRawStackTrace(stacktrace) {\r\n  const trace = [];\r\n  for (const line of stacktrace.split(\"\\n\")) {\r\n    const parsed = LINE_RE.exec(line)?.groups;\r\n    if (!parsed) {\r\n      continue;\r\n    }\r\n    if (!parsed.source) {\r\n      continue;\r\n    }\r\n    const parsedSource = SOURCE_RE.exec(parsed.source)?.groups;\r\n    if (parsedSource) {\r\n      Object.assign(parsed, parsedSource);\r\n    }\r\n    if (IS_ABSOLUTE_RE.test(parsed.source)) {\r\n      parsed.source = `file://${parsed.source}`;\r\n    }\r\n    if (parsed.source === import.meta.url) {\r\n      continue;\r\n    }\r\n    for (const key of [\"line\", \"column\"]) {\r\n      if (parsed[key]) {\r\n        parsed[key] = Number(parsed[key]);\r\n      }\r\n    }\r\n    trace.push(parsed);\r\n  }\r\n  return trace;\r\n}\r\n\r\nexport { captureRawStackTrace, captureStackTrace, parseRawStackTrace };\r\n"],
  "mappings": ";;;AAAA,IAAM,iBAAiB;AACvB,IAAM,UAAU;AAChB,IAAM,YAAY;AAClB,SAAS,uBAAuB;AAC9B,MAAI,CAAC,MAAM,mBAAmB;AAC5B;AAAA,EACF;AACA,QAAM,QAAQ,IAAI,MAAM;AACxB,QAAM,kBAAkB,KAAK;AAC7B,SAAO,MAAM;AACf;AACA,SAAS,oBAAoB;AAC3B,QAAM,QAAQ,qBAAqB;AACnC,SAAO,QAAQ,mBAAmB,KAAK,IAAI,CAAC;AAC9C;AACA,SAAS,mBAAmB,YAAY;AACtC,QAAM,QAAQ,CAAC;AACf,aAAW,QAAQ,WAAW,MAAM,IAAI,GAAG;AACzC,UAAM,SAAS,QAAQ,KAAK,IAAI,GAAG;AACnC,QAAI,CAAC,QAAQ;AACX;AAAA,IACF;AACA,QAAI,CAAC,OAAO,QAAQ;AAClB;AAAA,IACF;AACA,UAAM,eAAe,UAAU,KAAK,OAAO,MAAM,GAAG;AACpD,QAAI,cAAc;AAChB,aAAO,OAAO,QAAQ,YAAY;AAAA,IACpC;AACA,QAAI,eAAe,KAAK,OAAO,MAAM,GAAG;AACtC,aAAO,SAAS,UAAU,OAAO,MAAM;AAAA,IACzC;AACA,QAAI,OAAO,WAAW,YAAY,KAAK;AACrC;AAAA,IACF;AACA,eAAW,OAAO,CAAC,QAAQ,QAAQ,GAAG;AACpC,UAAI,OAAO,GAAG,GAAG;AACf,eAAO,GAAG,IAAI,OAAO,OAAO,GAAG,CAAC;AAAA,MAClC;AAAA,IACF;AACA,UAAM,KAAK,MAAM;AAAA,EACnB;AACA,SAAO;AACT;",
  "names": []
}
