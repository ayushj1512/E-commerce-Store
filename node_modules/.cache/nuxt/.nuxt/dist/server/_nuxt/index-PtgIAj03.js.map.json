{"file":"index-PtgIAj03.js","mappings":"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","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrRenderClass","_ssrInterpolate","_unref","_ssrRenderComponent"],"sources":["../../../../../../../components/checkout/CheckoutAddressSelector.vue","../../../../../../../pages/checkout/index.vue"],"sourcesContent":["<template>\r\n  <div v-if=\"mounted\" class=\"bg-gray-50 py-6\">\r\n    <div class=\"max-w-7xl mx-auto space-y-8\">\r\n\r\n      <!-- ðŸ“ ADDRESS -->\r\n      <section class=\"bg-white p-6 rounded-2xl shadow-md\">\r\n        <h2 class=\"text-xl font-bold mb-4\">Delivery Address</h2>\r\n\r\n        <!-- shimmer -->\r\n        <div v-if=\"loading\" class=\"space-y-3\">\r\n          <div v-for=\"n in 2\" :key=\"n\" class=\"h-20 bg-gray-100 rounded-lg animate-pulse\"></div>\r\n        </div>\r\n\r\n        <!-- no addresses -->\r\n        <div v-else-if=\"!addresses.length\" class=\"text-center py-6\">\r\n          <p class=\"text-gray-600 mb-3\">No addresses found.</p>\r\n          <button @click=\"goToAddAddress\" class=\"bg-black text-white px-4 py-2 rounded-full\">\r\n            Add Address\r\n          </button>\r\n        </div>\r\n\r\n        <!-- show addresses -->\r\n        <div v-else class=\"space-y-3\">\r\n          <div\r\n            v-for=\"addr in addresses\"\r\n            :key=\"addr.id_address\"\r\n            @click=\"selectAddress(addr)\"\r\n            class=\"relative border p-4 rounded-xl cursor-pointer transition-all duration-200 hover:shadow-md\"\r\n            :class=\"selectedAddress?.id_address === addr.id_address\r\n              ? 'border-black shadow-lg ring-1 ring-black/10'\r\n              : 'border-gray-200'\"\r\n          >\r\n            <!-- Selected Tag -->\r\n            <span\r\n              v-if=\"selectedAddress?.id_address === addr.id_address\"\r\n              class=\"absolute top-2 right-2 text-xs bg-black text-white px-2 py-1 rounded-full\"\r\n            >\r\n              Selected\r\n            </span>\r\n\r\n            <div>\r\n              <p class=\"font-semibold\">{{ addr.fullname }}</p>\r\n              <p class=\"text-sm text-gray-600\">\r\n                {{ addr.address1 }} <span v-if=\"addr.address2\">, {{ addr.address2 }}</span>\r\n              </p>\r\n              <p class=\"text-sm text-gray-600\">\r\n                {{ addr.city }}, {{ addr.name }} - {{ addr.postcode }}\r\n              </p>\r\n              <p class=\"text-sm text-gray-500\">ðŸ“ž {{ addr.phone_mobile }}</p>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"flex justify-center\">\r\n            <button @click=\"goToAddAddress\" class=\"bg-black text-white px-4 py-2 rounded-full\">\r\n              Add New Address\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\";\r\nimport { useAddressStore } from \"~/stores/address\";\r\nimport { useAuthStore } from \"~/stores/auth\";\r\nimport { useRouter } from \"vue-router\";\r\n\r\nconst mounted = ref(false);\r\nconst loading = ref(true);\r\nconst selectedAddress = ref(null);\r\n\r\nconst router = useRouter();\r\nconst addressStore = useAddressStore();\r\nconst authStore = useAuthStore();\r\n\r\nconst addresses = computed(() =>\r\n  addressStore.addresses.map((a) => ({\r\n    id_address: a.id_address,\r\n    fullname: a.fullname || `${a.firstname ?? \"\"} ${a.lastname ?? \"\"}`,\r\n    address1: a.address1 || \"\",\r\n    address2: a.address2 || \"\",\r\n    city: a.city || \"\",\r\n    name: a.name || \"\",\r\n    postcode: a.postcode || \"\",\r\n    phone_mobile: a.phone_mobile || \"\",\r\n  }))\r\n);\r\n\r\nfunction goToAddAddress() {\r\n  router.push(\"/profile/add-address\");\r\n}\r\n\r\nfunction selectAddress(addr) {\r\n  selectedAddress.value = addr;\r\n}\r\n\r\nonMounted(async () => {\r\n  mounted.value = true;\r\n  loading.value = true;\r\n\r\n  // 1ï¸âƒ£ Initialize auth first\r\n  authStore.initAuth();\r\n\r\n  // 2ï¸âƒ£ Wait until user is authenticated before fetching addresses\r\n  if (authStore.isAuthenticated && authStore.key) {\r\n    await addressStore.fetchAddresses();\r\n\r\n    // Auto-select first address if available\r\n    if (addressStore.addresses.length > 0) {\r\n      const a = addressStore.addresses[0];\r\n      selectedAddress.value = {\r\n        id_address: a.id_address,\r\n        fullname: a.fullname || `${a.firstname ?? \"\"} ${a.lastname ?? \"\"}`,\r\n        address1: a.address1 || \"\",\r\n        address2: a.address2 || \"\",\r\n        city: a.city || \"\",\r\n        name: a.name || \"\",\r\n        postcode: a.postcode || \"\",\r\n        phone_mobile: a.phone_mobile || \"\",\r\n      };\r\n    }\r\n  }\r\n\r\n  loading.value = false;\r\n});\r\n</script>\r\n","<template>\r\n  <div v-if=\"mounted\" class=\"bg-gray-50 min-h-screen py-6 px-3 sm:px-6 md:px-12 lg:px-24\">\r\n    <div class=\"max-w-7xl mx-auto space-y-8\">\r\n\r\n      <!-- 1) CART (TOP) -->\r\n      <section class=\"bg-white p-6 rounded-2xl shadow-md\">\r\n        <h2 class=\"text-xl font-bold mb-4\">Your Cart</h2>\r\n\r\n        <div v-if=\"cart.items.length === 0\" class=\"text-center py-6\">\r\n          <p class=\"text-gray-600 text-sm sm:text-base\">Your cart is empty.</p>\r\n        </div>\r\n\r\n        <div v-else class=\"space-y-4\">\r\n          <div\r\n            v-for=\"item in cart.items\"\r\n            :key=\"item.id + (item.size || '')\"\r\n            class=\"flex justify-between items-center border-b pb-3\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <img :src=\"item.image\" alt=\"Product\" class=\"w-16 h-20 object-cover rounded-xl\" />\r\n              <div>\r\n                <p class=\"font-medium text-gray-800\">{{ item.name }}</p>\r\n                <p v-if=\"item.size\" class=\"text-gray-500 text-sm\">Size: {{ item.size }}</p>\r\n                <p class=\"text-gray-900 font-semibold\">â‚¹{{ item.price }} x {{ item.quantity }}</p>\r\n              </div>\r\n            </div>\r\n            <p class=\"font-semibold text-gray-900\">â‚¹{{ item.price * item.quantity }}</p>\r\n          </div>\r\n\r\n          <!-- small inline summary at top (optional) -->\r\n          <div class=\"mt-4 flex justify-between items-center text-gray-700\">\r\n            <div>\r\n              <div class=\"text-sm\">Total items: <span class=\"font-semibold\">{{ totalItems }}</span></div>\r\n              <div class=\"text-sm\">Subtotal: <span class=\"font-semibold\">â‚¹{{ subtotal }}</span></div>\r\n            </div>\r\n            <div class=\"text-right\">\r\n              <div class=\"text-sm\">Delivery: â‚¹{{ deliveryCharge }}</div>\r\n              <div class=\"text-sm\">Discount: -â‚¹{{ discount }}</div>\r\n              <div class=\"text-lg font-bold mt-1\">Total: â‚¹{{ total }}</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n    <div>    <CheckoutAddressSelector /> </div>\r\n    \r\n\r\n      <!-- 3) PAYMENT OPTIONS -->\r\n      <section class=\"bg-white p-6 rounded-2xl shadow-md\">\r\n        <h2 class=\"text-xl font-bold mb-4\">Payment Options</h2>\r\n\r\n        <div class=\"grid grid-cols-1 gap-4\">\r\n          <!-- COD -->\r\n          <label\r\n            class=\"flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition\"\r\n            :class=\"selectedPayment === 'cod' ? 'border-black shadow-md' : 'border-gray-300'\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <input type=\"radio\" value=\"cod\" v-model=\"selectedPayment\" class=\"accent-black\" />\r\n              <div>\r\n                <p class=\"font-medium\">Cash on Delivery</p>\r\n                <p class=\"text-xs text-gray-500\">Not available on this order. â‚¹99 COD charge if applicable.</p>\r\n              </div>\r\n            </div>\r\n            <LucideAlertCircle class=\"w-5 h-5 text-gray-500\" />\r\n          </label>\r\n\r\n          <!-- BNPL -->\r\n          <label\r\n            class=\"flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition\"\r\n            :class=\"selectedPayment === 'bnpl' ? 'border-black shadow-md' : 'border-gray-300'\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <input type=\"radio\" value=\"bnpl\" v-model=\"selectedPayment\" class=\"accent-black\" />\r\n              <div>\r\n                <p class=\"font-medium\">Buy Now Pay Later</p>\r\n                <p class=\"text-xs text-gray-500\">Pay â‚¹{{ bnplNow }} now + 2 monthly payments of â‚¹{{ bnplLater }} later</p>\r\n              </div>\r\n            </div>\r\n            <LucideClock class=\"w-5 h-5 text-gray-500\" />\r\n          </label>\r\n\r\n          <!-- UPI -->\r\n          <label\r\n            class=\"flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition\"\r\n            :class=\"selectedPayment === 'upi' ? 'border-black shadow-md' : 'border-gray-300'\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <input type=\"radio\" value=\"upi\" v-model=\"selectedPayment\" class=\"accent-black\" />\r\n              <span class=\"font-medium\">UPI (GooglePay / PhonePe / PayTM)</span>\r\n            </div>\r\n            <LucideSmartphone class=\"w-5 h-5 text-gray-500\" />\r\n          </label>\r\n\r\n          <!-- Card -->\r\n          <label\r\n            class=\"flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition\"\r\n            :class=\"selectedPayment === 'card' ? 'border-black shadow-md' : 'border-gray-300'\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <input type=\"radio\" value=\"card\" v-model=\"selectedPayment\" class=\"accent-black\" />\r\n              <span class=\"font-medium\">Credit / Debit Card (Visa / Master / Amex)</span>\r\n            </div>\r\n            <LucideCreditCard class=\"w-5 h-5 text-gray-500\" />\r\n          </label>\r\n\r\n          <!-- Net Banking -->\r\n          <label\r\n            class=\"flex items-center justify-between cursor-pointer border rounded-xl p-3 hover:shadow-md transition\"\r\n            :class=\"selectedPayment === 'netbanking' ? 'border-black shadow-md' : 'border-gray-300'\"\r\n          >\r\n            <div class=\"flex items-center gap-3\">\r\n              <input type=\"radio\" value=\"netbanking\" v-model=\"selectedPayment\" class=\"accent-black\" />\r\n              <span class=\"font-medium\">Net Banking</span>\r\n            </div>\r\n            <LucideBriefcase class=\"w-5 h-5 text-gray-500\" />\r\n          </label>\r\n        </div>\r\n      </section>\r\n\r\n      <!-- 4) ORDER SUMMARY (end) -->\r\n      <section class=\"bg-white p-6 rounded-2xl shadow-md\">\r\n        <h2 class=\"text-xl font-bold mb-4\">Order Summary</h2>\r\n\r\n        <div class=\"space-y-3 text-gray-700\">\r\n          <div class=\"flex justify-between font-medium\">\r\n            <span>Total Items</span>\r\n            <span>{{ totalItems }}</span>\r\n          </div>\r\n\r\n          <div class=\"flex justify-between font-medium\">\r\n            <span>Subtotal</span>\r\n            <span>â‚¹{{ subtotal }}</span>\r\n          </div>\r\n\r\n          <div class=\"flex justify-between font-medium\">\r\n            <span>Delivery</span>\r\n            <span>â‚¹{{ deliveryCharge }}</span>\r\n          </div>\r\n\r\n          <div class=\"flex justify-between font-medium\">\r\n            <span>Discount</span>\r\n            <span>-â‚¹{{ discount }}</span>\r\n          </div>\r\n\r\n          <div class=\"flex justify-between font-bold text-lg border-t pt-2\">\r\n            <span>Total Payment</span>\r\n            <span>â‚¹{{ total }}</span>\r\n          </div>\r\n\r\n          <div class=\"pt-4 flex flex-col sm:flex-row sm:justify-between sm:items-center gap-3\">\r\n            <div class=\"flex items-center gap-4\">\r\n              <div class=\"flex items-center gap-2\">\r\n                <LucideShield class=\"w-5 h-5 text-green-600\" />\r\n                <span class=\"text-sm font-medium\">Secure Payment</span>\r\n              </div>\r\n              <div class=\"flex items-center gap-2\">\r\n                <LucideRepeat class=\"w-5 h-5 text-green-600\" />\r\n                <span class=\"text-sm font-medium\">Easy Exchange</span>\r\n              </div>\r\n              <div class=\"flex items-center gap-2\">\r\n                <LucideRefreshCw class=\"w-5 h-5 text-green-600\" />\r\n                <span class=\"text-sm font-medium\">Fast Refunds</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"flex items-center gap-3\">\r\n              <button @click=\"proceedToPayment\"\r\n                class=\"bg-black text-white px-6 py-3 rounded-full font-semibold hover:bg-gray-800 transition-colors flex items-center gap-2\">\r\n                <LucideCreditCard class=\"w-5 h-5\" />\r\n                <span>Proceed to Payment â€¢ â‚¹{{ total }}</span>\r\n                <LucideArrowRight class=\"w-5 h-5\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted, watch } from \"vue\";\r\nimport { useCartStore } from \"~/stores/cartStore\";\r\nimport { useAddressStore } from \"~/stores/address\";\r\nimport { useRouter } from \"vue-router\";\r\nimport CheckoutAddressSelector from \"~/components/checkout/CheckoutAddressSelector.vue\";\r\n\r\n// lucide icons (using the 'Lucide*' prefixed components)\r\nimport {\r\n  LucideCreditCard,\r\n  LucideArrowRight,\r\n  LucideAlertCircle,\r\n  LucideSmartphone,\r\n  LucideClock,\r\n  LucideBriefcase,\r\n  LucideShield,\r\n  LucideRepeat,\r\n  LucideRefreshCw,\r\n} from \"lucide-vue-next\";\r\n\r\nconst cart = useCartStore();\r\nconst addressStore = useAddressStore();\r\nconst router = useRouter();\r\n\r\nconst mounted = ref(false);\r\nconst showAddressSelector = ref(false);\r\nconst selectedPayment = ref(\"cod\");\r\n\r\nconst deliveryCharge = 40;\r\nconst discount = 0;\r\n\r\nonMounted(async () => {\r\n  mounted.value = true;\r\n  console.log(\"[Checkout] mounted, cart items:\", cart.items.length);\r\n  console.log(\"[Checkout] addressStore before init:\", addressStore.addresses?.length ?? \"no-store\");\r\n\r\n  // fetch addresses (safe init)\r\n  try {\r\n    await addressStore.init();\r\n    console.log(\"[Checkout] addressStore after init, addresses:\", addressStore.addresses);\r\n  } catch (err) {\r\n    console.error(\"[Checkout] addressStore.init() failed:\", err);\r\n  }\r\n});\r\n\r\n// expose selected address reactively\r\nconst selectedAddress = computed(() => {\r\n  const a = addressStore.deliveryAddress ?? addressStore.getDeliveryAddress ?? {};\r\n  console.log(\"[Checkout] computed selectedAddress:\", a && Object.keys(a).length ? a.id_address ?? \"has-id\" : \"none\");\r\n  return a;\r\n});\r\n\r\n// totals\r\nconst subtotal = computed(() =>\r\n  cart.items.reduce((acc, item) => acc + (item.price || 0) * (item.quantity || 0), 0)\r\n);\r\nconst totalItems = computed(() =>\r\n  cart.items.reduce((acc, item) => acc + (item.quantity || 0), 0)\r\n);\r\nconst total = computed(() => subtotal.value + deliveryCharge - discount);\r\n\r\nconst bnplNow = computed(() => Math.round(total.value / 3));\r\nconst bnplLater = computed(() => bnplNow.value);\r\n\r\n// helper actions\r\nfunction openAddressSelector() {\r\n  console.log(\"[Checkout] openAddressSelector toggle:\", !showAddressSelector.value);\r\n  showAddressSelector.value = !showAddressSelector.value;\r\n  // ensure store addresses are loaded\r\n  if (!addressStore.addresses.length) {\r\n    addressStore.init().then(() => console.log(\"[Checkout] addresses loaded via toggle\"));\r\n  }\r\n}\r\n\r\nfunction goToAddAddress() {\r\n  console.log(\"[Checkout] navigating to add-address\");\r\n  router.push(\"/profile/add-address\");\r\n}\r\n\r\nfunction confirmUseAddress() {\r\n  console.log(\"[Checkout] confirmUseAddress:\", selectedAddress.value);\r\n  // Highlight action â€” already selected in store by selector component, so just log\r\n  alert(\"Using selected address for this order.\");\r\n}\r\n\r\nfunction proceedToPayment() {\r\n  console.log(\"[Checkout] proceedToPayment called. Selected address:\", selectedAddress.value);\r\n  if (!selectedAddress.value || Object.keys(selectedAddress.value).length === 0 || !selectedAddress.value.id_address) {\r\n    alert(\"Please select a delivery address before proceeding.\");\r\n    return;\r\n  }\r\n  console.log(\"[Checkout] selectedPayment:\", selectedPayment.value, \"total:\", total.value);\r\n  router.push(\"/checkout/payment\");\r\n}\r\n\r\n// debug watchers (optional)\r\nwatch(selectedPayment, (v) => console.log(\"[Checkout] payment changed to:\", v));\r\n\r\n</script>\r\n\r\n<style scoped>\r\ninput:checked {\r\n  accent-color: black;\r\n}\r\n</style>\r\n"],"version":3}