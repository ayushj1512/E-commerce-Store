{"version":3,"file":"deactivation-DScxYzhO.js","sources":["../../../../../../../pages/profile/deactivation.vue"],"sourcesContent":["<template>\r\n  <div class=\"bg-gray-50 min-h-screen flex flex-col py-6 px-3 sm:px-6 md:px-12 lg:px-24 overflow-x-hidden\">\r\n    <div class=\"mx-auto w-full max-w-3xl space-y-8 flex-1\">\r\n\r\n      <!-- Header -->\r\n      <div class=\"text-center mb-6 px-2\">\r\n        <h1 class=\"text-2xl sm:text-3xl md:text-4xl font-extrabold text-black break-words\">\r\n          Account Deactivation\r\n        </h1>\r\n        <p class=\"text-gray-700 sm:text-base md:text-lg mt-2 break-words\">\r\n          Please read carefully before proceeding. Deactivating your account is permanent and cannot be undone.\r\n        </p>\r\n      </div>\r\n\r\n      <!-- Info Card -->\r\n      <div class=\"bg-white shadow-lg rounded-3xl p-6 md:p-10 space-y-4 overflow-hidden\">\r\n        <h2 class=\"text-xl sm:text-2xl font-bold text-black\">What happens when you deactivate:</h2>\r\n        <ul class=\"list-disc list-inside text-gray-700 space-y-2 text-sm sm:text-base\">\r\n          <li>You will be logged out from your SSS account immediately.</li>\r\n          <li>Your reviews/ratings remain visible, but your profile info will be unavailable.</li>\r\n          <li>Wishlist items will no longer be accessible via public links.</li>\r\n          <li>You will be unsubscribed from promotional emails and SMS.</li>\r\n          <li>Order history is retained, but personal information (mobile, email, addresses) will be deleted.</li>\r\n        </ul>\r\n      </div>\r\n\r\n      <!-- Send OTP Button -->\r\n      <div class=\"flex justify-center mt-4\">\r\n        <button @click=\"sendOTP\"\r\n          class=\"bg-red-600 text-white px-6 py-3 rounded-full hover:bg-red-700 transition shadow-md font-semibold text-base\">\r\n          Send Deactivation Code\r\n        </button>\r\n      </div>\r\n\r\n      <!-- OTP Input Section -->\r\n      <transition name=\"fade-scale\">\r\n        <div v-if=\"otpSent\" class=\"bg-white shadow-lg rounded-3xl p-6 md:p-10 mt-6 space-y-4\">\r\n          <h3 class=\"text-lg sm:text-xl font-bold text-black text-center\">Enter OTP</h3>\r\n          <p class=\"text-gray-600 text-sm sm:text-base text-center\">\r\n            An OTP has been sent to your registered mobile/email. Please enter it below to confirm deactivation.\r\n          </p>\r\n          <input v-model=\"otp\"\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP\"\r\n            class=\"w-full border border-gray-300 rounded-xl p-4 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-red-600 focus:border-transparent text-center\" />\r\n          <div class=\"flex justify-center gap-4 flex-wrap\">\r\n            <button @click=\"verifyOTP\"\r\n              class=\"flex-1 px-4 py-2 bg-red-600 text-white rounded-xl hover:bg-red-700 transition shadow-md\">\r\n              Confirm Deactivation\r\n            </button>\r\n            <button @click=\"otpSent = false\"\r\n              class=\"flex-1 px-4 py-2 bg-gray-200 rounded-xl hover:bg-gray-300 transition shadow-md\">\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </transition>\r\n\r\n      <!-- Status Message -->\r\n      <div v-if=\"statusMessage\" class=\"mt-4 text-center text-sm sm:text-base text-gray-800 font-medium\">\r\n        {{ statusMessage }}\r\n      </div>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue';\r\nimport { useAuthStore } from '~/stores/auth';\r\n\r\nconst auth = useAuthStore();\r\nconst mounted = ref(true);\r\n\r\nconst otpSent = ref(false);\r\nconst otp = ref('');\r\nconst statusMessage = ref('');\r\n\r\n// Send OTP\r\nconst sendOTP = async () => {\r\n  statusMessage.value = '';\r\n  try {\r\n    const response = await auth.sendDeactivtionCode();\r\n    if (response?.success) {\r\n      otpSent.value = true;\r\n      statusMessage.value = 'OTP sent successfully. Please check your registered mobile/email.';\r\n    } else {\r\n      statusMessage.value = response?.message || 'Failed to send OTP.';\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    statusMessage.value = 'Something went wrong. Please try again.';\r\n  }\r\n};\r\n\r\n// Verify OTP\r\nconst verifyOTP = async () => {\r\n  if (!otp.value.trim()) {\r\n    statusMessage.value = 'Please enter the OTP.';\r\n    return;\r\n  }\r\n  try {\r\n    const response = await auth.verifyDeactivationCode(otp.value);\r\n    if (response?.success) {\r\n      statusMessage.value = 'Your account has been successfully deactivated. Logging out...';\r\n      setTimeout(() => {\r\n        auth.logout();\r\n        window.location.href = '/login';\r\n      }, 2000);\r\n    } else {\r\n      statusMessage.value = response?.message || 'Invalid OTP. Please try again.';\r\n    }\r\n  } catch (err) {\r\n    console.error(err);\r\n    statusMessage.value = 'Something went wrong. Please try again.';\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.fade-scale-enter-active,\r\n.fade-scale-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.fade-scale-enter-from,\r\n.fade-scale-leave-to {\r\n  opacity: 0;\r\n  transform: scale(0.95);\r\n}\r\n\r\n.fade-scale-enter-to,\r\n.fade-scale-leave-from {\r\n  opacity: 1;\r\n  transform: scale(1);\r\n}\r\n</style>\r\n"],"names":["_ssrRenderAttrs","_mergeProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAuEa,iBAAA;AACG,QAAI,IAAI;AAExB,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,MAAM,IAAI,EAAE;AAClB,UAAM,gBAAgB,IAAI,EAAE;;AA3ErB,YAAA,OAAAA,eAAAC,WAAA,EAAA,OAAM,iGAA6F,MAAA,CAAA,CAAA,u8CAAA;UAmCvF,QAAA,OAAO;uZAKA,IAAA,KAAG,CAAA,6jBAAA;AAAA;;;UAkBZ,cAAA,OAAa;6HACnB,cAAA,KAAa,CAAA,QAAA;AAAA;;;;;;;;;;;;;;"}