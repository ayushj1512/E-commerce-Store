{"version":3,"file":"auth-BN3AZtwB.js","sources":["../../../../../../../middleware/auth.js"],"sourcesContent":["// middleware/auth.js\r\nimport { useAuthStore } from \"~/stores/auth\";\r\n\r\nexport default defineNuxtRouteMiddleware((to, from) => {\r\n  const auth = useAuthStore();\r\n\r\n  // üîÑ Load session from cookies / localStorage\r\n  auth.loadSession();\r\n  console.log(\"[Auth Middleware] Session loaded:\", auth.$state);\r\n\r\n  // ‚ùå Redirect unauthenticated users to login page\r\n  if (!auth.isAuthenticated) {\r\n    console.log(\"[Auth Middleware] No session found. Redirecting to /login...\");\r\n    return navigateTo(\"/login\");\r\n  }\r\n\r\n  // ‚úÖ Redirect authenticated users away from login page\r\n  if (auth.isAuthenticated && to.path === \"/login\") {\r\n    console.log(\"[Auth Middleware] Already logged in, redirecting to home...\");\r\n    return navigateTo(\"/\"); // Optional: redirect to homepage\r\n  }\r\n\r\n  console.log(\"[Auth Middleware] Navigation allowed to:\", to.path);\r\n});\r\n"],"names":["auth"],"mappings":";;;;;;;;;;;;;;;;;;AAGA,MAAA,OAAe,0BAA0B,CAAC,IAAI,SAAS;AACrD,QAAMA,QAAO;AAGb,EAAAA,MAAK,YAAW;AAChB,UAAQ,IAAI,qCAAqCA,MAAK,MAAM;AAG5D,MAAI,CAACA,MAAK,iBAAiB;AACzB,YAAQ,IAAI,8DAA8D;AAC1E,WAAO,WAAW,QAAQ;AAAA,EAC5B;AAGA,MAAIA,MAAK,mBAAmB,GAAG,SAAS,UAAU;AAChD,YAAQ,IAAI,6DAA6D;AACzE,WAAO,WAAW,GAAG;AAAA,EACvB;AAEA,UAAQ,IAAI,4CAA4C,GAAG,IAAI;AACjE,CAAC;"}