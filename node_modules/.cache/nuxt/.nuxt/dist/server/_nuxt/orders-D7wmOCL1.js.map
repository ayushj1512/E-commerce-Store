{"version":3,"file":"orders-D7wmOCL1.js","sources":["../../../../../../../pages/profile/orders.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-white text-black p-4 sm:p-6\">\r\n    <!-- Page Title -->\r\n    <h1 class=\"text-xl sm:text-2xl font-bold mb-4 sm:mb-6\">My Orders</h1>\r\n\r\n    <!-- Search + Sort Controls -->\r\n    <div class=\"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-4 mb-6\">\r\n      <!-- Search -->\r\n      <input\r\n        v-model=\"searchQuery\"\r\n        type=\"text\"\r\n        placeholder=\"Search orders...\"\r\n        class=\"flex-1 px-3 sm:px-4 py-2 border border-black bg-white text-black placeholder-gray-500 rounded focus:outline-none text-sm sm:text-base\"\r\n      />\r\n\r\n      <!-- Sort -->\r\n      <select\r\n        v-model=\"sortOption\"\r\n        class=\"w-full sm:w-1/3 px-3 sm:px-4 py-2 border border-black bg-white text-black rounded focus:outline-none text-sm sm:text-base\"\r\n      >\r\n        <option value=\"latest\">Latest First</option>\r\n        <option value=\"oldest\">Oldest First</option>\r\n        <option value=\"high\">Price: High to Low</option>\r\n        <option value=\"low\">Price: Low to High</option>\r\n      </select>\r\n    </div>\r\n\r\n    <!-- Orders List -->\r\n    <div v-if=\"filteredOrders.length\" class=\"space-y-3 sm:space-y-4\">\r\n      <div\r\n        v-for=\"order in filteredOrders\"\r\n        :key=\"order.id\"\r\n        class=\"border border-black rounded-lg p-3 sm:p-4 hover:bg-black hover:text-white transition text-sm sm:text-base cursor-pointer\"\r\n        @click=\"viewOrder(order)\"\r\n      >\r\n        <div class=\"flex flex-col sm:flex-row sm:justify-between sm:items-center\">\r\n          <h2 class=\"font-semibold text-base sm:text-lg\">Order #{{ order.id }}</h2>\r\n          <span class=\"text-xs sm:text-sm opacity-70 mt-1 sm:mt-0\">{{ formatDate(order.date) }}</span>\r\n        </div>\r\n        <p class=\"mt-2 text-xs sm:text-sm\">Status: {{ order.status }}</p>\r\n        <p class=\"text-xs sm:text-sm\">Total: ‚Çπ{{ order.total }}</p>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- No Orders -->\r\n    <div v-else class=\"text-center py-12 sm:py-16 px-4\">\r\n      <p class=\"text-base sm:text-lg font-medium mb-2\">Looks like you haven‚Äôt ordered yet! üõçÔ∏è</p>\r\n      <p class=\"text-xs sm:text-sm text-gray-600 mb-5\">Why not treat yourself to something special today?</p>\r\n      <router-link\r\n        to=\"/\"\r\n        class=\"inline-block px-4 sm:px-6 py-2 border border-black rounded text-sm sm:text-base hover:bg-black hover:text-white transition\"\r\n      >\r\n        Start Shopping\r\n      </router-link>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, computed, onMounted } from \"vue\"\r\n\r\n// Reactive State\r\nconst orders = ref([])\r\nconst searchQuery = ref(\"\")\r\nconst sortOption = ref(\"latest\")\r\n\r\n// Simulate Vuex/API utility\r\nconst $api = {\r\n  async gatewayServerCall(axios, url, payload, key, withCredentials) {\r\n    // Replace with your actual API call\r\n    return axios.post(url, JSON.parse(payload), { withCredentials }).then(res => res.data)\r\n  }\r\n}\r\n\r\nconst $axios = axios\r\nconst $globals = { gatewayUrl: \"https://gateway.streetstylestore.com/gateway/v1/\", site: \"defaultSite\" }\r\n\r\n// Fetch Orders\r\nconst fetchOrders = async () => {\r\n  try {\r\n    const requestData = JSON.stringify({\r\n      gateway_action: \"customer/getCustomerOrderList\",\r\n      version: \"1\",\r\n      orderType: \"all\",  // Adjust as needed\r\n      orderTime: \"all\"   // Adjust as needed\r\n    })\r\n\r\n    const res = await $api.gatewayServerCall($axios, $globals.gatewayUrl, requestData, '', true)\r\n    orders.value = res.orders || []\r\n  } catch (err) {\r\n    console.error(\"Failed to fetch orders:\", err)\r\n  }\r\n}\r\n\r\nonMounted(fetchOrders)\r\n\r\n// Computed: Filter + Sort\r\nconst filteredOrders = computed(() => {\r\n  let filtered = [...orders.value]\r\n\r\n  // Search\r\n  if (searchQuery.value) {\r\n    filtered = filtered.filter(order =>\r\n      order.id.toString().includes(searchQuery.value) ||\r\n      order.status.toLowerCase().includes(searchQuery.value.toLowerCase())\r\n    )\r\n  }\r\n\r\n  // Sort\r\n  if (sortOption.value === \"latest\") {\r\n    filtered.sort((a, b) => new Date(b.date) - new Date(a.date))\r\n  } else if (sortOption.value === \"oldest\") {\r\n    filtered.sort((a, b) => new Date(a.date) - new Date(b.date))\r\n  } else if (sortOption.value === \"high\") {\r\n    filtered.sort((a, b) => b.total - a.total)\r\n  } else if (sortOption.value === \"low\") {\r\n    filtered.sort((a, b) => a.total - b.total)\r\n  }\r\n\r\n  return filtered\r\n})\r\n\r\n// Format Date\r\nconst formatDate = (dateStr) => {\r\n  const date = new Date(dateStr)\r\n  return date.toLocaleDateString(\"en-IN\", {\r\n    year: \"numeric\",\r\n    month: \"short\",\r\n    day: \"numeric\"\r\n  })\r\n}\r\n\r\n// Actions\r\nconst viewOrder = async (order) => {\r\n  try {\r\n    // Get Specific Order Details\r\n    const requestData = JSON.stringify({\r\n      gateway_action: \"customer/getCustomerOrderList\",\r\n      version: \"1\",\r\n      orderType: \"all\",\r\n      idOrder: order.id\r\n    })\r\n    const res = await $api.gatewayServerCall($axios, $globals.gatewayUrl, requestData, '', true)\r\n    console.log(\"Specific Order:\", res)\r\n\r\n    // Optionally Track Order\r\n    if(order.tracking) {\r\n      const trackData = JSON.stringify({\r\n        gateway_action: 'customer/customerOrder',\r\n        site: $globals.site,\r\n        type: 'trackOrder',\r\n        idOrder: order.id,\r\n        idCarrier: order.carrierId,\r\n        shippingNumber: order.shippingNumber\r\n      })\r\n      const trackRes = await $api.gatewayServerCall($axios, $globals.gatewayUrl, trackData, '', true)\r\n      console.log(\"Tracking Info:\", trackRes)\r\n    }\r\n\r\n    // Optionally Send Pre-Order Confirmation\r\n    // await sendPreOrderConfirmation(order.id)\r\n\r\n  } catch (err) {\r\n    console.error(\"Failed to fetch order details:\", err)\r\n  }\r\n}\r\n\r\nconst sendPreOrderConfirmation = async (orderId) => {\r\n  if (!orderId) return\r\n  try {\r\n    const requestData = JSON.stringify({\r\n      gateway_action: \"order/confirmation/index\",\r\n      id_order: orderId,\r\n      version: \"1\"\r\n    })\r\n    const res = await $api.gatewayServerCall($axios, $globals.gatewayUrl, requestData, '', true)\r\n    console.log(\"Pre-Order Confirmation:\", res)\r\n    return res\r\n  } catch (err) {\r\n    console.error(\"Failed to send pre-order confirmation:\", err)\r\n  }\r\n}\r\n</script>\r\n"],"names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrInterpolate","_push","_parent"],"mappings":";;;;;;AA8DA,UAAM,SAAS,IAAI,EAAE;AACrB,UAAM,cAAc,IAAI,EAAE;AAC1B,UAAM,aAAa,IAAI,QAAQ;AAUhB;AAuBf,UAAM,iBAAiB,SAAS,MAAM;AACpC,UAAI,WAAW,CAAC,GAAG,OAAO,KAAK;AAG/B,UAAI,YAAY,OAAO;AACrB,mBAAW,SAAS;AAAA,UAAO,WACzB,MAAM,GAAG,SAAQ,EAAG,SAAS,YAAY,KAAK,KAC9C,MAAM,OAAO,YAAW,EAAG,SAAS,YAAY,MAAM,aAAa;AAAA,QACzE;AAAA,MACE;AAGA,UAAI,WAAW,UAAU,UAAU;AACjC,iBAAS,KAAK,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,IAAI,IAAI,IAAI,KAAK,EAAE,IAAI,CAAC;AAAA,MAC7D,WAAW,WAAW,UAAU,UAAU;AACxC,iBAAS,KAAK,CAAC,GAAG,MAAM,IAAI,KAAK,EAAE,IAAI,IAAI,IAAI,KAAK,EAAE,IAAI,CAAC;AAAA,MAC7D,WAAW,WAAW,UAAU,QAAQ;AACtC,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,MAC3C,WAAW,WAAW,UAAU,OAAO;AACrC,iBAAS,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,MAC3C;AAEA,aAAO;AAAA,IACT,CAAC;AAGD,UAAM,aAAa,CAAC,YAAY;AAC9B,YAAM,OAAO,IAAI,KAAK,OAAO;AAC7B,aAAO,KAAK,mBAAmB,SAAS;AAAA,QACtC,MAAM;AAAA,QACN,OAAO;AAAA,QACP,KAAK;AAAA,MACT,CAAG;AAAA,IACH;;;mBAjIOA,eAAAC,WAAA,EAAA,OAAM,8CAA6C,GAAA,MAAA,CAAA,gNAQzC,YAAA,KAAW,kYAQX,WAAA,KAAU,oBAAV,WAAA,OAAU,QAAA,kBAAV,WAAA,OAAU,QAAA,CAAA,IAAA,cAAA,qFAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,QAAA,kBAAV,WAAA,OAAU,QAAA,CAAA,IAAA,cAAA,mFAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,MAAA,kBAAV,WAAA,OAAU,MAAA,CAAA,IAAA,cAAA,wFAAV,WAAA,KAAU,oBAAV,WAAA,OAAU,KAAA,kBAAV,WAAA,OAAU,KAAA,CAAA,IAAA,cAAA;AAWZ,UAAA,eAAA,MAAe,QAAM;;AAEZC,sBAAA,eAAA,QAAT,UAAK;yRAM+CC,eAAA,MAAM,EAAE,iFACL,WAAW,MAAM,IAAI,CAAA,4DAErCA,eAAA,MAAM,MAAM,8CACjBA,eAAA,MAAM,KAAK;;;;;;UASpD,IAAG;AAAA,UACH,OAAM;AAAA;2BAFR,CAKc,GAAAC,QAAAC,UAAA,aAAA;;;;;gCAFb,kBAED;AAAA;;;;;;;;;;;;;;;;;"}