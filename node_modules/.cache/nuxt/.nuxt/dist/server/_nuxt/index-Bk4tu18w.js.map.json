{"file":"index-Bk4tu18w.js","mappings":";;;;;;;;;;;;;;;;;;;;AAwEA,UAAM,OAAO,IAAI,EAAE;AACnB,UAAM,QAAQ,IAAI,CAAC;AACnB,UAAM,kBAAkB,IAAI,CAAC;AAC7B,UAAM,YAAY,IAAI,IAAI;AAC1B,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,OAAO,IAAI,CAAA,CAAE;AACD,QAAI,IAAI;AAC1B,UAAM,UAAU,IAAI,KAAK;AACzB,UAAM,cAAc,IAAI,CAAA,CAAE;;mBA/EnBA,eAAAC,WAAA,EAAA,OAAM,+DAA8D,GAAA,MAAA,CAAA,qVAQnD,KAAA,KAAI,mXAQK,MAAA,KAAK,uUAKL,gBAAA,KAAe,mYAUxB,SAAA,KAAQ;UAKf,QAAA,OAAO;;sBACQ,YAAA,OAAW,CAAtB,KAAK,MAAC;2FACd,GAAG,CAAA,QAAA;AAAA;;;;;AASC,UAAA,KAAA,MAAK,QAAM;;AAGEC,sBAAA,KAAA,QAAP,QAAG;qHACX,GAAG,CAAA,SAAA;AAAA;;;;;AAOC,YAAA,UAAAC,sBAAA,QAAA,UAAY,KAAA,SAAI,CAAK,eAAK,CAAM,UAAA,UAAc,SAAA,KAAQ,IAAA,cAAA,EAAA,6MAAA;AAAA;;;;;;;;;;","names":["_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrIncludeBooleanAttr"],"sources":["../../../../../../../pages/add-product/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"min-h-screen bg-gray-50 flex items-center justify-center p-6\">\r\n    <div class=\"w-full max-w-lg bg-white rounded-xl shadow-lg p-6 space-y-6\">\r\n\r\n      <h1 class=\"text-2xl font-bold text-gray-800 text-center\">Add New Product</h1>\r\n\r\n      <!-- Product Name -->\r\n      <div>\r\n        <label class=\"block text-gray-700 font-medium mb-1\">Product Name</label>\r\n        <input v-model=\"name\" type=\"text\" placeholder=\"Enter product name\"\r\n          class=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\" />\r\n      </div>\r\n\r\n      <!-- Price & Discounted Price -->\r\n      <div class=\"flex gap-4\">\r\n        <div class=\"flex-1\">\r\n          <label class=\"block text-gray-700 font-medium mb-1\">Price</label>\r\n          <input v-model.number=\"price\" type=\"number\" placeholder=\"₹\"\r\n            class=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\" />\r\n        </div>\r\n        <div class=\"flex-1\">\r\n          <label class=\"block text-gray-700 font-medium mb-1\">Discounted Price</label>\r\n          <input v-model.number=\"discountedPrice\" type=\"number\" placeholder=\"₹\"\r\n            class=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\" />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Image Upload OR URL -->\r\n      <div>\r\n        <label class=\"block text-gray-700 font-medium mb-1\">Product Image</label>\r\n        <input ref=\"fileInput\" type=\"file\" accept=\"image/*\" @change=\"handleFileUpload\"\r\n          class=\"w-full mb-2\" />\r\n        <input v-model=\"imageUrl\" type=\"text\" placeholder=\"Or enter image URL\"\r\n          class=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400\" />\r\n      </div>\r\n\r\n      <!-- Loader & Logs -->\r\n      <div v-if=\"loading\" class=\"py-2\">\r\n        <div v-for=\"(msg, i) in logMessages\" :key=\"i\" class=\"text-purple-700 font-medium\">\r\n          {{ msg }}\r\n        </div>\r\n        <svg class=\"animate-spin h-6 w-6 text-purple-600 mt-2\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n          <circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\r\n          <path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8v8H4z\"></path>\r\n        </svg>\r\n      </div>\r\n\r\n      <!-- Auto-generated Tags -->\r\n      <div v-if=\"tags.length\">\r\n        <p class=\"text-gray-600 font-medium mb-2\">Detected Tags:</p>\r\n        <div class=\"flex flex-wrap gap-2\">\r\n          <span v-for=\"tag in tags\" :key=\"tag\" class=\"bg-purple-100 text-purple-700 px-3 py-1 rounded-full\">\r\n            {{ tag }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Submit Button -->\r\n      <button @click=\"submitProduct\"\r\n        :disabled=\"loading || !name || !price || (!imageFile && !imageUrl)\"\r\n        class=\"w-full bg-purple-600 text-white font-semibold py-3 rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed\">\r\n        Submit Product\r\n      </button>\r\n\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from \"vue\";\r\nimport axios from \"axios\";\r\n\r\nconst name = ref(\"\");\r\nconst price = ref(0);\r\nconst discountedPrice = ref(0);\r\nconst imageFile = ref(null);\r\nconst imageUrl = ref(\"\");\r\nconst tags = ref([]);\r\nconst fileInput = ref(null);\r\nconst loading = ref(false);\r\nconst logMessages = ref([]);\r\n\r\n// Handle file input\r\nconst handleFileUpload = (e) => {\r\n  const file = e.target.files[0];\r\n  if (!file) return;\r\n  imageFile.value = file;\r\n  imageUrl.value = \"\";\r\n};\r\n\r\n// Submit product\r\nconst submitProduct = async () => {\r\n  if (!name.value || !price.value || (!imageFile.value && !imageUrl.value)) {\r\n    alert(\"Please fill all required fields and provide an image\");\r\n    return;\r\n  }\r\n\r\n  loading.value = true;\r\n  logMessages.value = [\"Preparing data...\"];\r\n  tags.value = [];\r\n\r\n  const formData = new FormData();\r\n  formData.append(\"name\", name.value);\r\n  formData.append(\"price\", price.value);\r\n  formData.append(\"discountedPrice\", discountedPrice.value);\r\n  if (imageFile.value) formData.append(\"image\", imageFile.value);\r\n  else formData.append(\"imageUrl\", imageUrl.value);\r\n\r\n  try {\r\n    logMessages.value.push(\"Sending request to backend...\");\r\n    const res = await axios.post(\"http://localhost:5000/api/products\", formData, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n\r\n    if (res.data.tags && res.data.tags.length > 0) {\r\n      tags.value = res.data.tags;\r\n      logMessages.value.push(`Tags detected: ${tags.value.join(\", \")}`);\r\n    } else {\r\n      logMessages.value.push(res.data.error || \"No tags detected from backend.\");\r\n    }\r\n\r\n    alert(\"Product added successfully!\");\r\n\r\n    // Reset form\r\n    name.value = \"\";\r\n    price.value = 0;\r\n    discountedPrice.value = 0;\r\n    imageFile.value = null;\r\n    imageUrl.value = \"\";\r\n    if (fileInput.value) fileInput.value.value = \"\";\r\n    logMessages.value.push(\"Form reset complete.\");\r\n\r\n  } catch (err) {\r\n    console.error(\"Error:\", err.response?.data || err);\r\n    alert(err.response?.data?.error || \"Error adding product\");\r\n    logMessages.value.push(\"Error occurred while submitting product.\");\r\n  } finally {\r\n    loading.value = false;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n::-webkit-scrollbar { display: none; }\r\n</style>\r\n"],"version":3}