import{_ as U,r,c as u,o as n,a as l,C as y,U as g,V as m,F as x,E as w,t as h,O as C}from"#entry";const V={class:"min-h-screen bg-gray-50 flex items-center justify-center p-6"},D={class:"w-full max-w-lg bg-white rounded-xl shadow-lg p-6 space-y-6"},E={class:"flex gap-4"},F={class:"flex-1"},N={class:"flex-1"},B={key:0,class:"py-2"},I={key:1},T={class:"flex flex-wrap gap-2"},M=["disabled"],S={__name:"index",setup(j){const d=r(""),i=r(0),v=r(0),p=r(null),s=r(""),c=r([]),b=r(null),f=r(!1),o=r([]),k=a=>{const e=a.target.files[0];e&&(p.value=e,s.value="")},P=async()=>{if(!d.value||!i.value||!p.value&&!s.value){alert("Please fill all required fields and provide an image");return}f.value=!0,o.value=["Preparing data..."],c.value=[];const a=new FormData;a.append("name",d.value),a.append("price",i.value),a.append("discountedPrice",v.value),p.value?a.append("image",p.value):a.append("imageUrl",s.value);try{o.value.push("Sending request to backend...");const e=await C.post("http://localhost:5000/api/products",a,{headers:{"Content-Type":"multipart/form-data"}});e.data.tags&&e.data.tags.length>0?(c.value=e.data.tags,o.value.push(`Tags detected: ${c.value.join(", ")}`)):o.value.push(e.data.error||"No tags detected from backend."),alert("Product added successfully!"),d.value="",i.value=0,v.value=0,p.value=null,s.value="",b.value&&(b.value.value=""),o.value.push("Form reset complete.")}catch(e){console.error("Error:",e.response?.data||e),alert(e.response?.data?.error||"Error adding product"),o.value.push("Error occurred while submitting product.")}finally{f.value=!1}};return(a,e)=>(n(),u("div",V,[l("div",D,[e[10]||(e[10]=l("h1",{class:"text-2xl font-bold text-gray-800 text-center"},"Add New Product",-1)),l("div",null,[e[4]||(e[4]=l("label",{class:"block text-gray-700 font-medium mb-1"},"Product Name",-1)),g(l("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>d.value=t),type:"text",placeholder:"Enter product name",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"},null,512),[[m,d.value]])]),l("div",E,[l("div",F,[e[5]||(e[5]=l("label",{class:"block text-gray-700 font-medium mb-1"},"Price",-1)),g(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>i.value=t),type:"number",placeholder:"₹",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"},null,512),[[m,i.value,void 0,{number:!0}]])]),l("div",N,[e[6]||(e[6]=l("label",{class:"block text-gray-700 font-medium mb-1"},"Discounted Price",-1)),g(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>v.value=t),type:"number",placeholder:"₹",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"},null,512),[[m,v.value,void 0,{number:!0}]])])]),l("div",null,[e[7]||(e[7]=l("label",{class:"block text-gray-700 font-medium mb-1"},"Product Image",-1)),l("input",{ref_key:"fileInput",ref:b,type:"file",accept:"image/*",onChange:k,class:"w-full mb-2"},null,544),g(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.value=t),type:"text",placeholder:"Or enter image URL",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400"},null,512),[[m,s.value]])]),f.value?(n(),u("div",B,[(n(!0),u(x,null,w(o.value,(t,_)=>(n(),u("div",{key:_,class:"text-purple-700 font-medium"},h(t),1))),128)),e[8]||(e[8]=l("svg",{class:"animate-spin h-6 w-6 text-purple-600 mt-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8H4z"})],-1))])):y("",!0),c.value.length?(n(),u("div",I,[e[9]||(e[9]=l("p",{class:"text-gray-600 font-medium mb-2"},"Detected Tags:",-1)),l("div",T,[(n(!0),u(x,null,w(c.value,t=>(n(),u("span",{key:t,class:"bg-purple-100 text-purple-700 px-3 py-1 rounded-full"},h(t),1))),128))])])):y("",!0),l("button",{onClick:P,disabled:f.value||!d.value||!i.value||!p.value&&!s.value,class:"w-full bg-purple-600 text-white font-semibold py-3 rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed"}," Submit Product ",8,M)])]))}},L=U(S,[["__scopeId","data-v-68c1500a"]]);export{L as default};
