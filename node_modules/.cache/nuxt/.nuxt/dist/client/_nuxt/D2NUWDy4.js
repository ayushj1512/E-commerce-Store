import{r as x,B as h,g as k,a0 as _,c as i,o as n,a as s,U as v,V as O,ak as S,F as C,E as D,t as m,b as L,w as N,d as T}from"#entry";const U={class:"min-h-screen bg-white text-black p-4 sm:p-6"},F={class:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-3 sm:gap-4 mb-6"},V={key:0,class:"space-y-3 sm:space-y-4"},B=["onClick"],J={class:"flex flex-col sm:flex-row sm:justify-between sm:items-center"},M={class:"font-semibold text-base sm:text-lg"},$={class:"text-xs sm:text-sm opacity-70 mt-1 sm:mt-0"},I={class:"mt-2 text-xs sm:text-sm"},j={class:"text-xs sm:text-sm"},q={key:1,class:"text-center py-12 sm:py-16 px-4"},Q={__name:"orders",setup(E){const y=x([]),l=x(""),r=x("latest"),u={async gatewayServerCall(t,e,a,o,d){return t.post(e,JSON.parse(a),{withCredentials:d}).then(f=>f.data)}},p=axios,c={gatewayUrl:"https://gateway.streetstylestore.com/gateway/v1/",site:"defaultSite"};h(async()=>{try{const t=JSON.stringify({gateway_action:"customer/getCustomerOrderList",version:"1",orderType:"all",orderTime:"all"}),e=await u.gatewayServerCall(p,c.gatewayUrl,t,"",!0);y.value=e.orders||[]}catch(t){console.error("Failed to fetch orders:",t)}});const g=k(()=>{let t=[...y.value];return l.value&&(t=t.filter(e=>e.id.toString().includes(l.value)||e.status.toLowerCase().includes(l.value.toLowerCase()))),r.value==="latest"?t.sort((e,a)=>new Date(a.date)-new Date(e.date)):r.value==="oldest"?t.sort((e,a)=>new Date(e.date)-new Date(a.date)):r.value==="high"?t.sort((e,a)=>a.total-e.total):r.value==="low"&&t.sort((e,a)=>e.total-a.total),t}),b=t=>new Date(t).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),w=async t=>{try{const e=JSON.stringify({gateway_action:"customer/getCustomerOrderList",version:"1",orderType:"all",idOrder:t.id}),a=await u.gatewayServerCall(p,c.gatewayUrl,e,"",!0);if(console.log("Specific Order:",a),t.tracking){const o=JSON.stringify({gateway_action:"customer/customerOrder",site:c.site,type:"trackOrder",idOrder:t.id,idCarrier:t.carrierId,shippingNumber:t.shippingNumber}),d=await u.gatewayServerCall(p,c.gatewayUrl,o,"",!0);console.log("Tracking Info:",d)}}catch(e){console.error("Failed to fetch order details:",e)}};return(t,e)=>{const a=_("router-link");return n(),i("div",U,[e[6]||(e[6]=s("h1",{class:"text-xl sm:text-2xl font-bold mb-4 sm:mb-6"},"My Orders",-1)),s("div",F,[v(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value=o),type:"text",placeholder:"Search orders...",class:"flex-1 px-3 sm:px-4 py-2 border border-black bg-white text-black placeholder-gray-500 rounded focus:outline-none text-sm sm:text-base"},null,512),[[O,l.value]]),v(s("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),class:"w-full sm:w-1/3 px-3 sm:px-4 py-2 border border-black bg-white text-black rounded focus:outline-none text-sm sm:text-base"},[...e[2]||(e[2]=[s("option",{value:"latest"},"Latest First",-1),s("option",{value:"oldest"},"Oldest First",-1),s("option",{value:"high"},"Price: High to Low",-1),s("option",{value:"low"},"Price: Low to High",-1)])],512),[[S,r.value]])]),g.value.length?(n(),i("div",V,[(n(!0),i(C,null,D(g.value,o=>(n(),i("div",{key:o.id,class:"border border-black rounded-lg p-3 sm:p-4 hover:bg-black hover:text-white transition text-sm sm:text-base cursor-pointer",onClick:d=>w(o)},[s("div",J,[s("h2",M,"Order #"+m(o.id),1),s("span",$,m(b(o.date)),1)]),s("p",I,"Status: "+m(o.status),1),s("p",j,"Total: â‚¹"+m(o.total),1)],8,B))),128))])):(n(),i("div",q,[e[4]||(e[4]=s("p",{class:"text-base sm:text-lg font-medium mb-2"},"Looks like you havenâ€™t ordered yet! ðŸ›ï¸",-1)),e[5]||(e[5]=s("p",{class:"text-xs sm:text-sm text-gray-600 mb-5"},"Why not treat yourself to something special today?",-1)),L(a,{to:"/",class:"inline-block px-4 sm:px-6 py-2 border border-black rounded text-sm sm:text-base hover:bg-black hover:text-white transition"},{default:N(()=>[...e[3]||(e[3]=[T(" Start Shopping ",-1)])]),_:1})]))])}}};export{Q as default};
